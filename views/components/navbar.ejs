<div class="container absolute left-2/4 z-10 mx-auto -translate-x-2/4 p-4">
    <nav class="block w-full max-w-screen-2xl rounded-xl dark:bg-gray-700 text-gray-900 md:text-white shadow-none p-3">
        <div class="container mx-auto flex items-center justify-between">
            <a href="/" class="text-gray-900 md:text-white font-bold font-sans text-lg">Blog</a>
            
            <div class="hidden lg:block">
                <ul class="mb-4 mt-2 flex flex-col gap-2 text-inherit lg:mb-0 lg:mt-0 lg:flex-row lg:items-center lg:gap-6">
                    <li class="block antialiased font-sans text-sm font-light leading-normal text-inherit capitalize"><a class="flex items-center gap-1 p-1 font-bold" href="/">
                         <% if (language === 'ru') { %>Дом<% } else if (language === 'kz') { %>Басты бет<% } else { %>Home<% } %></a></li>
                    <% if (!user) { %>
                    <!-- <li class="block antialiased font-sans text-sm font-light leading-normal text-inherit capitalize"><a class="flex items-center gap-1 p-1 font-bold" href="/login">Sign In</a></li>
                    <li class="block antialiased font-sans text-sm font-light leading-normal text-inherit capitalize"><a class="flex items-center gap-1 p-1 font-bold" href="/signup">Sign Up</a></li> -->
                    <% } else { %>
                    <li class="block antialiased font-sans text-sm font-light leading-normal text-inherit capitalize"><a class="flex items-center gap-1 p-1 font-bold" href="/posts">
                         <% if (language === 'ru') { %>Посты<% } else if (language === 'kz') { %>Посттар<% } else { %>Posts<% } %></a></li>
                    <li class="block antialiased font-sans text-sm font-light leading-normal text-inherit capitalize"><a class="flex items-center gap-1 p-1 font-bold" href="/user/posts">
                         <% if (language === 'ru') { %>Мои посты<% } else if (language === 'kz') { %>Менің посттарым<% } else { %>My posts<% } %></a></li>

                    <% } %> <% if (user?.isAdmin) { %>

                    <li class="block antialiased font-sans text-sm font-light leading-normal text-inherit capitalize"><a class="flex items-center gap-1 p-1 font-bold" href="/admin/users">
                         <% if (language === 'ru') { %>Пользователи<% } else if (language === 'kz') { %>Пайдаланушылар<% } else { %>Users<% } %></a></li>

                    <% } %>
                        
                </ul>
            </div>
            <div class="hidden gap-2 lg:flex">
               <div class="font-bold flex items-center" id="exchange-rate"></div>

                <form action="/set-language" method="POST" class="flex items-center text-black">
                    <select name="language" onchange="this.form.submit()">
                        <option value=" "> Lang </option>
                        <option value="ru">Русский</option>
                        <option value="kz">Қазақша</option>
                    </select>
                </form>
                
                <% if (!user) { %>
                <a href="/login"
                    ><button
                        class="align-middle select-none font-sans font-bold text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-2 px-4 rounded-lg text-white hover:bg-white/10 active:bg-white/30 block w-full"
                        type="button"
                    >
                        <% if (language === 'ru') { %>Войти<% } else if (language === 'kz') { %>Кіру<% } else { %>Log in<% } %>
                    </button></a
                ><a href="/signup" class="hidden lg:inline-block"
                    ><button
                        class="align-middle select-none font-sans font-bold text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-2 px-4 rounded-lg bg-gradient-to-tr from-gray-900 to-gray-800 text-white shadow-md shadow-gray-900/10 hover:shadow-lg hover:shadow-gray-900/20 active:opacity-[0.85] block w-full"
                        type="button"
                    >
                         <% if (language === 'ru') { %>Регистрация<% } else if (language === 'kz') { %>Тіркелу<% } else { %>Sign up<% } %>
                    </button></a
                >
                <% } else { %>
                <a href="/"
                    ><button
                        class="align-middle select-none font-sans font-bold text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-2 px-4 rounded-lg text-white hover:bg-white/10 active:bg-white/30 block w-full"
                        type="button"
                    >
                        <%= user?.name %>
                    </button></a
                ><a href="/logout" class="hidden lg:inline-block"
                    ><button
                        class="align-middle select-none font-sans font-bold text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-2 px-4 rounded-lg bg-gradient-to-tr from-gray-900 to-gray-800 text-white shadow-md shadow-gray-900/10 hover:shadow-lg hover:shadow-gray-900/20 active:opacity-[0.85] block w-full"
                        type="button"
                    >
                    <% if (language === 'ru') { %>Выйти<% } else if (language === 'kz') { %>Шығу<% } else { %>Sign up<% } %>

                    </button></a
                >
                <% } %>
            </div>
            <button
                class="relative align-middle select-none font-sans font-medium text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none w-8 max-w-[32px] h-8 max-h-[32px] rounded-lg text-xs ml-auto text-inherit hover:bg-transparent focus:bg-transparent active:bg-transparent lg:hidden"
                type="button"
                onclick="toggleDiv()"
                style="position: relative; overflow: hidden"
            >
                <span class="absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2"
                    ><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" class="h-6 w-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
                    </svg>
                </span>
            </button>
        </div>
        <div class="block w-full basis-full overflow-hidden rounded-xl bg-white px-4 pt-2 pb-4 text-blue-gray-900" style="height: 0px; opacity: 0">
            <div class="container mx-auto">
                <ul class="mb-4 mt-2 flex flex-col gap-2 text-inherit lg:mb-0 lg:mt-0 lg:flex-row lg:items-center lg:gap-6">
                    <li class="block antialiased font-sans text-sm font-light leading-normal text-inherit capitalize"><a class="flex items-center gap-1 p-1 font-bold" href="/home">home</a></li>
                    <li class="block antialiased font-sans text-sm font-light leading-normal text-inherit capitalize"><a class="flex items-center gap-1 p-1 font-bold" href="/profile">profile</a></li>
                    <li class="block antialiased font-sans text-sm font-light leading-normal text-inherit capitalize"><a class="flex items-center gap-1 p-1 font-bold" href="/sign-in">Sign In</a></li>
                    <li class="block antialiased font-sans text-sm font-light leading-normal text-inherit capitalize"><a class="flex items-center gap-1 p-1 font-bold" href="/sign-up">Sign Up</a></li>
                    <li class="block antialiased font-sans text-sm font-light leading-normal text-inherit capitalize">
                        <a href="https://www.material-tailwind.com/docs/react/installation" class="flex items-center gap-1 p-1 font-bold">Docs</a>
                    </li>
                </ul>
                <% if (!user) { %>
                <a href="/login" class="mb-2 block">
                    <button
                        class="align-middle select-none font-sans font-bold text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-2 px-4 rounded-lg text-gray-900 hover:bg-gray-900/10 active:bg-gray-900/20 block w-full"
                        type="button"
                    >
                        log in
                    </button></a
                ><a href="/signup" class="w-full block"
                    ><button
                        class="align-middle select-none font-sans font-bold text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-2 px-4 rounded-lg bg-gradient-to-tr from-gray-900 to-gray-800 text-white shadow-md shadow-gray-900/10 hover:shadow-lg hover:shadow-gray-900/20 active:opacity-[0.85] block w-full"
                        type="button"
                    >
                        sign up
                    </button></a
                >
                <% } else { %>
                <a href="/" class="mb-2 block">
                    <button
                        class="align-middle select-none font-sans font-bold text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-2 px-4 rounded-lg text-gray-900 hover:bg-gray-900/10 active:bg-gray-900/20 block w-full"
                        type="button"
                    >
                        <%= user?.name %>
                    </button></a
                ><a href="/logout" class="w-full block"
                    ><button
                        class="align-middle select-none font-sans font-bold text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-2 px-4 rounded-lg bg-gradient-to-tr from-gray-900 to-gray-800 text-white shadow-md shadow-gray-900/10 hover:shadow-lg hover:shadow-gray-900/20 active:opacity-[0.85] block w-full"
                        type="button"
                    >
                        Log out
                    </button></a
                >
                <% } %>
            </div>
        </div>
    </nav>
</div>
<script>
    function toggleDiv() {
        var div = document.querySelector(".block.w-full.basis-full.overflow-hidden.rounded-xl.bg-white.px-4.pt-2.pb-4.text-blue-gray-900");
        if (div.style.height === "297px") {
            div.style.height = "0px";
            div.style.opacity = "0";
        } else {
            div.style.height = "297px";
            div.style.opacity = "1";
        }
    }
    async function loadExchangeRate() {
    try {
        const apiKey = "ca4ddc1c144c416ba416f7401a5acbbe";
        const response = await fetch(`https://open.er-api.com/v6/latest/USD?app_id=${apiKey}`);
        const data = await response.json();
        console.log(data);
        const exchangeRate = data.rates.KZT;

        const exchangeRateElement = document.getElementById("exchange-rate");
        exchangeRateElement.innerText = `1 USD =  ${exchangeRate.toFixed(2)} KZT`;
    } catch (error) {
        console.error("Failed to load exchange rate:", error);
    }
}
window.onload = loadExchangeRate;

</script>
